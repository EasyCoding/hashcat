From 19e90d3e78fe07c79764d544af8036b29677351f Mon Sep 17 00:00:00 2001
From: Vitaly Zaitsev <vitaly@easycoding.org>
Date: Wed, 17 Jun 2020 11:24:51 +0200
Subject: [PATCH 2/2] Fixed build against packaged version of minizip.

---
 include/ext_lzma.h | 4 ++--
 src/Makefile       | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/include/ext_lzma.h b/include/ext_lzma.h
index feaa5d90..a346a8e2 100644
--- a/include/ext_lzma.h
+++ b/include/ext_lzma.h
@@ -8,8 +8,8 @@
 #include <LzmaDec.h>
 #include <Lzma2Dec.h>
 
-#include "contrib/minizip/ioapi.h"
-#include "contrib/minizip/unzip.h"
+#include "minizip/ioapi.h"
+#include "minizip/unzip.h"
 
 int hc_lzma1_decompress (const unsigned char *in, SizeT *in_len, unsigned char *out, SizeT *out_len, const char *props);
 int hc_lzma2_decompress (const unsigned char *in, SizeT *in_len, unsigned char *out, SizeT *out_len, const char *props);
diff --git a/src/Makefile b/src/Makefile
index 517bbc77..8b38d62d 100644
--- a/src/Makefile
+++ b/src/Makefile
@@ -218,7 +218,7 @@ endif
 # ZLIB
 CFLAGS                  += -I$(DEPS_ZLIB_PATH)
 ifeq ($(USE_SYSTEM_ZLIB),1)
-LFLAGS                  += -lz
+LFLAGS                  += -lz -lminizip
 endif
 
 # OpenCL
-- 
2.26.2

